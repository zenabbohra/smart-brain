(this["webpackJsonpsmart-brain"]=this["webpackJsonpsmart-brain"]||[]).push([[0],{32:function(e){e.exports=JSON.parse('{"particles":{"number":{"value":170,"density":{"enable":true,"value_area":1262.6561550541749}},"color":{"value":"#07644e"},"shape":{"type":"circle","stroke":{"width":0,"color":"#000000"},"polygon":{"nb_sides":4},"image":{"src":"img/github.svg","width":100,"height":100}},"opacity":{"value":0.5,"random":true,"anim":{"enable":false,"speed":1,"opacity_min":0.1,"sync":false}},"size":{"value":3.9458004845442964,"random":true,"anim":{"enable":false,"speed":2.397449114142552,"size_min":0.1,"sync":false}},"line_linked":{"enable":false,"distance":500,"color":"#ffffff","opacity":0.4,"width":2},"move":{"enable":true,"speed":2,"direction":"bottom","random":false,"straight":false,"out_mode":"out","bounce":false,"attract":{"enable":false,"rotateX":473.49605814531554,"rotateY":631.3280775270874}}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":true,"mode":"bubble"},"onclick":{"enable":true,"mode":"repulse"},"resize":true},"modes":{"grab":{"distance":400,"line_linked":{"opacity":0.5}},"bubble":{"distance":400,"size":4,"duration":0.3,"opacity":1,"speed":3},"repulse":{"distance":200,"duration":0.4},"push":{"particles_nb":4},"remove":{"particles_nb":2}}},"retina_detect":true}')},33:function(e,t,a){e.exports=a(81)},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),o=a.n(i),s=(a(38),a(7)),l=a(8),c=a(10),m=a(9),u=a(11),d=(a(39),a(40),function(e){var t=e.onPageChange;return e.isSignedIn?r.a.createElement("nav",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement("p",{onClick:function(){return t("sign out")},className:"underline pa3 f3 dim pointer link"},"Sign Out")):r.a.createElement("nav",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement("p",{onClick:function(){return t("sign in")},className:"underline pa3 f3 dim pointer link"},"Sign In"),r.a.createElement("p",{onClick:function(){return t("register")},className:"underline pa3 f3 dim pointer link"},"Register"))}),g=a(30),p=a.n(g),h=(a(41),function(){return r.a.createElement("div",{className:" ma4 mt0"},r.a.createElement(p.a,{className:"Tilt br2 shadow-2",options:{max:65},style:{height:150,width:150}},r.a.createElement("div",{className:"Tilt-inner pa3"},r.a.createElement("img",{alt:"",src:"brainLogo.png",style:{height:120,width:120}}))))}),b=function(e){var t=e.onInputChange,a=e.onButtonClick,n=e.imageInputError;return r.a.createElement("div",{className:"tc"},r.a.createElement("p",{className:"f4"},"This Magic Brain will detect faces in your pictures. Git it a try. "),r.a.createElement("input",{className:"pa1 w-30-l shadow-5 bw1 bw2",style:{borderOpacity:"1",borderColor:"#f7f3f300"},type:"text",placeholder:"Insert an image url here (preferably a face)",onChange:t}),r.a.createElement("button",{className:"f6 link dim ph3 pv2 mb2 dib white bg-light-purple",onClick:a},"Detect"),r.a.createElement("p",{className:"tc lh-copy mt3"},n))},f=(a(42),function(e){var t=e.imageUrl,a=e.box;return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"mt2 tc",style:{position:"relative"}},r.a.createElement("img",{alt:"",id:"inputimage",src:t,width:"500px",height:"auto"}),a.length?a.map((function(e,t){return r.a.createElement("div",{key:t,className:"bounding-box",style:{top:e.topRow,left:e.leftCol,bottom:e.bottomRow,right:e.rightCol}})})):""))}),v=a(31),E=a.n(v),w=a(16),y=a.n(w),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onEmailInputChange=function(e){a.setState({signInEmail:e.target.value})},a.onPasswordInputChange=function(e){a.setState({signInPassword:e.target.value})},a.onSignInButtonClick=function(){var e=a.props,t=e.onPageChange,n=e.loadUser,r=a.state,i=r.signInEmail,o=r.signInPassword;a.setState({loading:!0,signInError:null}),fetch("https://face-detect-zenab.herokuapp.com/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:o})}).then((function(e){return e.json()})).then((function(e){if(e.id)n(e),t("home");else{var r=e;console.log(r),a.setState({signInError:r,loading:!1})}})).catch((function(e){console.log("err",e),a.setState({signInError:"Unexpected error, please try again",loading:!1})}))},a.state={signInEmail:"",signInPassword:"",loading:!1,signInError:null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.onEmailInputChange,a=this.onPasswordInputChange,n=this.state,i=n.loading,o=n.signInError;return r.a.createElement("article",{className:"br3 ba b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center",style:{marginTop:"8rem"}},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("div",{className:"measure"},r.a.createElement("legend",{className:"center f4 fw6 ph0 mh0"},"Sign In"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",onChange:t})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:a})),r.a.createElement("div",{className:"tc"},r.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:i?"Signing in":"Sign in",disabled:i,onClick:this.onSignInButtonClick})),r.a.createElement("div",{className:"tc lh-copy mt3"},r.a.createElement("p",{onClick:function(){return e.props.onPageChange("register")},className:"f6 link dim black db"},"Register")),r.a.createElement("p",{className:"tc lh-copy mt3"},o))))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onNameInputChange=function(e){a.setState({registerName:e.target.value})},a.onEmailInputChange=function(e){a.setState({registerEmail:e.target.value})},a.onPasswordInputChange=function(e){a.setState({registerPassword:e.target.value})},a.onRegisterClick=function(){var e=a.props,t=e.onPageChange,n=e.loadUser,r=a.state,i=r.registerName,o=r.registerEmail,s=r.registerPassword;a.setState({loading:!0,registerError:null}),fetch("https://face-detect-zenab.herokuapp.com/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,email:o,password:s})}).then((function(e){return e.json()})).then((function(e){if(e.id)t("home"),n(e);else{var r=e;a.setState({loading:!1,registerError:r.err})}})).catch((function(e){console.log("err",e),a.setState({loading:!1,registerError:"Unexpected error occurred, try again"})}))},a.state={registerName:"",registerEmail:"",registerPassword:"",loading:!1,registerError:null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.onNameInputChange,t=this.onEmailInputChange,a=this.onPasswordInputChange,n=this.state,i=n.loading,o=n.registerError;return r.a.createElement("article",{className:"br3 ba b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center",style:{marginTop:"8rem"}},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("div",{className:"measure"},r.a.createElement("legend",{className:"center f4 fw6 ph0 mh0"},"Register"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Name"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"name",name:"name",id:"name",onChange:e})),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",onChange:t})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:a})),r.a.createElement("div",{className:"tc"}),r.a.createElement("div",{className:"tc lh-copy mt3"},r.a.createElement("input",{type:"submit",value:i?"Creating account":"Register",className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",disabled:i,onClick:this.onRegisterClick})),r.a.createElement("p",{className:"tc lh-copy mt3"},o))))}}]),t}(n.Component),k=function(e){var t=e.name,a=e.entries;return r.a.createElement("div",{className:"f4"},r.a.createElement("p",{className:"center i"},"".concat(t,", your entry count is ")),r.a.createElement("p",{className:"f3 tc"},"".concat(a)))},I=a(32),S=new y.a.App({apiKey:"de40d02dd82d4e4b826194bf1a7dfe20"}),j=I,x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).calculateFaceDim=function(e){var t=[],a=document.getElementById("inputimage"),n=Number(a.width),r=Number(a.height),i=!0,o=!1,s=void 0;try{for(var l,c=e.outputs[0].data.regions[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var m=l.value;t.push({leftCol:m.region_info.bounding_box.left_col*n,topRow:m.region_info.bounding_box.top_row*r,rightCol:n-m.region_info.bounding_box.right_col*n,bottomRow:r-m.region_info.bounding_box.bottom_row*r})}}catch(u){o=!0,s=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw s}}return t},a.displayFaceBox=function(e){a.setState({box:e})},a.onInputChange=function(e){a.setState({input:e.target.value})},a.onButtonClick=function(){a.setState({imageUrl:a.state.input,imageInputError:null}),a.state.input?S.models.predict(y.a.FACE_DETECT_MODEL,a.state.input).then((function(e){var t=a.calculateFaceDim(e);return a.displayFaceBox(t),t})).then((function(e){e?fetch("https://face-detect-zenab.herokuapp.com/image",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.state.user.id})}).then((function(e){return e.json()})).then((function(e){a.setState(Object.assign(a.state.user,{entries:e}))})).catch((function(e){return console.log("entry count error",e)})):console.log("no box dimension returned")})).catch((function(e){a.setState({imageInputError:"Bad image url provided",box:""}),console.log("Bad image url provided",e)})):a.setState({imageInputError:"No image url provided",box:""})},a.onPageChange=function(e){console.log("page",e),"sign out"===e?a.setState({isSignedIn:!1}):"home"===e&&a.setState({isSignedIn:!0}),a.setState({page:e})},a.loadUser=function(e){var t=e.id,n=e.name,r=e.email,i=e.password,o=e.entries,s=e.joined;a.setState({user:{id:t,name:n,email:r,signInPassword:i,entries:o,joined:s},imageUrl:"",imageInputError:null})},a.state={imageUrl:"",input:"",box:[],isSignedIn:!1,page:"sign in",imageInputError:null,user:{name:"",signInEmail:"",signInPassword:"",entries:0,joined_date:new Date}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){fetch("https://face-detect-zenab.herokuapp.com/")}},{key:"render",value:function(){var e=this.state,t=e.imageUrl,a=e.box,n=e.isSignedIn,i=e.page,o=e.user,s=e.imageInputError,l=this.onPageChange,c=this.loadUser,m=this.onButtonClick,u=this.onInputChange;return r.a.createElement("div",null,r.a.createElement(E.a,{className:"particles",params:j}),r.a.createElement(d,{onPageChange:l,isSignedIn:n}),n||"sign out"!==i&&"sign in"!==i?n||"register"!==i?r.a.createElement("div",null,r.a.createElement(h,null),r.a.createElement(k,{name:o.name,entries:o.entries}),r.a.createElement(b,{onInputChange:u,onButtonClick:m,imageInputError:s}),r.a.createElement(f,{imageUrl:t,box:a})):r.a.createElement(C,{onPageChange:l,loadUser:c}):r.a.createElement(N,{onPageChange:l,loadUser:c}))}}]),t}(n.Component),P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(x,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/smart-brain",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/smart-brain","/service-worker.js");P?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):O(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):O(t,e)}))}}()}},[[33,1,2]]]);
//# sourceMappingURL=main.b72dcb13.chunk.js.map